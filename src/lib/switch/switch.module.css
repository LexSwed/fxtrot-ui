@layer lib, utils;

@layer lib {
  .toggle {
    position: relative;
    height: theme('spacing.6');
    width: theme('spacing.9');
    border-radius: theme('borderRadius.xl');
    border: 2px solid theme('colors.outline');
    box-shadow: theme('boxShadow.inner');
    transition: 240ms ease-in-out;
    transition-property: border-color, background-color;

    &:before {
      content: '';
      display: block;
      color: transparent;
      height: 100%;
      transform-origin: center;
      scale: 0.75;
      border-radius: theme('borderRadius.full');
      background-color: theme('colors.outline');
      text-align: center;
      font-size: theme('fontSize.xs');
      font-weight: 900;
      line-height: theme('spacing.6');
      aspect-ratio: 1 / 1;
      transition: 240ms ease-in-out;
      transition-property: transform, translate, scale, box-shadow, color, background-color, border-color;
    }
  }

  .input {
    position: absolute;
    inset: 0;
    z-index: 1;
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    opacity: 0;
    cursor: pointer;
    background: transparent;

    &:where(:not(:checked)) {
      &:hover + .toggle {
        @apply bg-primary/10;
        &:before {
          box-shadow: theme('boxShadow.xs'), theme('boxShadow.sm');
        }
      }

      &:focus + .toggle:before {
        background-color: theme('colors.on-surface');
        @apply ring-4 ring-outline ring-opacity-40;
      }
    }

    &:where(:checked) {
      & + .toggle {
        background-color: theme('colors.primary');
        border-color: theme('colors.primary/0.6');

        &:before {
          translate: theme('spacing.3');
          scale: 0.85;
          background-color: theme('colors.on-primary');
          color: theme('colors.primary');
        }
      }
      &:hover + .toggle {
        &:before {
          scale: 0.87;
        }
      }
      &:focus + .toggle:before {
        @apply ring-[0.5rem] ring-primary ring-opacity-50;
      }
    }

    &:disabled {
      cursor: not-allowed;

      & + .toggle {
        border-color: transparent;
        background-color: theme('colors.disabled');
        box-shadow: theme('boxShadow.xs');
        &:before {
          background-color: theme('colors.on-surface/0.4');
        }
      }

      &:checked + .toggle {
        &:before {
          background-color: theme('colors.surface');
          color: theme('colors.on-surface/0.6');
          box-shadow: theme('boxShadow.xs');
        }
      }
    }
  }
}

@tailwind components;

@layer components {
  .button {
    @apply inline-flex shrink-0 cursor-default select-none whitespace-nowrap border-2 border-solid bg-transparent font-medium text-on-surface transition-[color,box-shadow,filter,border-color,background-color,background-image] duration-200 focus:outline-none focus:ring-4 focus:ring-opacity-40;

    &:is(:disabled, [aria-disabled='true']) {
      @apply cursor-not-allowed border-transparent bg-disabled bg-none text-on-disabled;

      &:where(.button--danger) {
        @apply text-error/80;
      }
    }
  }

  /*
   Variant
  */

  .button--primary {
    @apply border-transparent bg-primary bg-gradient-to-t text-on-primary;

    &:where(:hover, :focus, :active) {
      @apply from-on-surface/20 to-on-surface/20;
    }

    &:where(:active, [data-state='open']) {
      @apply from-on-surface/25 to-on-surface/25;
    }

    &:where(:focus) {
      @apply ring-primary;
    }

    &:where(.button--danger) {
      @apply bg-error text-on-error;
    }
  }

  .button--outline {
    @apply border-primary/80 bg-transparent text-primary;

    &:where(:hover, :focus, :active) {
      @apply border-primary bg-primary/10;
    }

    &:where(:active, [data-state='open']) {
      @apply bg-primary/15;
    }

    &:where(:focus) {
      @apply ring-primary;
    }

    &:where(.button--danger) {
      @apply border-error text-error;

      &:where(:hover, :focus, :active) {
        @apply bg-error/10;
      }

      &:where(:active, [data-state='open']) {
        @apply bg-error/15;
      }
    }
  }

  .button--tonal {
    @apply border-transparent bg-primary/15 text-primary;

    &:where(:hover, :focus, :active) {
      @apply bg-primary/20;
    }

    &:where(:active, [data-state='open']) {
      @apply bg-primary/25;
    }

    &:where(:focus) {
      @apply ring-primary;
    }

    &:where(.button--danger) {
      @apply bg-error/15 text-error;

      &:where(:hover, :focus, :active) {
        @apply bg-error/20;
      }

      &:where(:active, [data-state='open']) {
        @apply bg-error/25;
      }
    }
  }

  /* 
   Using secondary colors
  .button--tonal {
    @apply border-transparent bg-secondary-container bg-gradient-to-t text-on-secondary-container focus:ring-secondary/30;

    &:where(:hover, :focus, :active) {
      @apply from-secondary/10 to-secondary/10;
    }

    &:where(:active, [data-state='open']) {
      @apply from-secondary/15 to-secondary/15;
    }

    &:where(.button--danger) {
      @apply bg-error/15 bg-none text-error;

      &:where(:hover, :focus, :active) {
        @apply bg-error/20;
      }

      &:where(:active, [data-state='open']) {
        @apply bg-error/25;
      }
    }
  } */

  .button--flat {
    @apply border-transparent bg-transparent text-on-surface;

    &:where(:hover, :focus, :active) {
      @apply bg-on-surface/10;

      &:where(.button--danger) {
        @apply bg-error/10;
      }
    }

    &:where(:active, [data-state='open']) {
      @apply border-outline/15 bg-on-surface/15;
    }

    &:where(:focus) {
      @apply ring-outline;
    }

    &:where(.button--danger) {
      @apply text-error;
    }

    /* ToggleButton */
    &:where([data-state='on']) {
      @apply border-primary/40 bg-primary/10 text-primary;

      &:where(:hover, :focus, :active) {
        @apply border-primary/50 bg-primary/15;
      }
    }
  }

  .button--link {
    @apply border-transparent bg-transparent text-primary;

    &:where(:hover) {
      @apply underline;
    }

    &:where(:focus) {
      @apply ring-primary;
    }

    &:is(:disabled, [aria-disabled='true']) {
      @apply bg-transparent no-underline;
    }
  }

  /*
   Intent
  */
  .button--danger {
    @apply focus:ring-error/50;
  }

  /*
    Size
  */
  .button--xs {
    min-block-size: theme(spacing.6);
    @apply rounded-md text-xs py-1 px-2;
    &:where(.button--icon) {
      @apply px-1;
      min-inline-size: theme(spacing.6);
    }
  }
  .button--sm {
    min-block-size: theme(spacing.8);
    @apply rounded-md text-sm py-1 px-3;
    &:where(.button--icon) {
      @apply px-1;
      min-inline-size: theme(spacing.8);
    }
  }
  .button--md {
    min-block-size: theme(spacing.10);
    @apply rounded-lg text-sm py-2 px-4;
    &:where(.button--icon) {
      @apply px-2;
      min-inline-size: theme(spacing.10);
    }
  }
  .button--lg {
    min-block-size: theme(spacing.12);
    @apply rounded-lg text-base py-2 px-6;
    &:where(.button--icon) {
      @apply px-2;
      min-inline-size: theme(spacing.12);
    }
  }

  /*
    Utils
  */
  .button--icon {
  }
}

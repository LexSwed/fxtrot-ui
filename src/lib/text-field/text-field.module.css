@import '../root.css';

@layer lib {
  .input-icon-wrapper {
    width: 100%;
    height: 100%;
    display: grid;
    grid-template: 1fr / 1fr theme('spacing.8');
    align-items: center;
  }

  .text-field {
    grid-area: 1 / 1 / -1 / -1;
    &[type='number']::-webkit-inner-spin-button,
    &[type='number']::-webkit-outer-spin-button {
      -webkit-appearance: inner-spin-button !important;
      appearance: inner-spin-button !important;
    }

    /** set same sizing/position styles as for custom ones */
    &[type='date']::-webkit-calendar-picker-indicator,
    &[type='search']::-webkit-search-cancel-button {
      height: inherit;
      position: absolute;
      inset-block: 0;
      inset-inline-end: 0;
      width: theme('spacing.8');
      padding-inline-end: theme('spacing.1');
      &:focus-visible {
        outline: 2px solid currentColor;
      }
    }

    &[type='date']::-webkit-calendar-picker-indicator {
      background-image: none;
      margin: 0;
      padding: 0;
    }

    &[type='search']::-webkit-search-cancel-button {
      appearance: none;
      margin: 0;
      padding: 0;
    }

    &[type='search']:placeholder-shown + .icon {
      opacity: 0;
    }
  }

  /** custom icon */
  .icon {
    grid-area: 1 / 2;
    width: theme('spacing.8');
    padding-inline-end: theme('spacing.1');
    outline: none;
    border-radius: theme('borderRadius.md');
    pointer-events: none;
    transition: color 0.1s ease-in;
  }
  .valid + .icon {
    stroke-width: 0.15rem;
    color: theme('colors.success');
  }
  .invalid + .icon {
    color: theme('colors.error');
  }
}
